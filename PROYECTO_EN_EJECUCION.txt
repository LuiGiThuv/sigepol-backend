ğŸš€ PROYECTO EJECUTÃNDOSE - GUÃA DE TESTING

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… SERVIDORES INICIADOS

Backend Django:
  âœ“ URL: http://127.0.0.1:8000/
  âœ“ Puerto: 8000
  âœ“ Status: CORRIENDO

Frontend Vite + React:
  âœ“ URL: http://localhost:5173/
  âœ“ Puerto: 5173
  âœ“ Status: CORRIENDO

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ§ª CÃ“MO PROBAR PASOS 4-6

OPCIÃ“N 1: Probar Endpoint REST
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Abrir Postman o cURL
2. GET http://127.0.0.1:8000/api/analytics/clusters/
3. Headers: Authorization: Bearer <TOKEN_JWT>
4. Verificar response JSON con 1,403 pÃ³lizas

Ejemplo cURL:
```bash
curl -H "Authorization: Bearer <TOKEN>" \
  http://127.0.0.1:8000/api/analytics/clusters/
```

Resultado esperado:
{
  "total_polizas": 1403,
  "clusters_identificados": 5,
  "data": [
    {
      "numero_poliza": "X-P-125623",
      "cliente_nombre": "LANDAETA RIVERA MIGUEL",
      "monto_uf": 14.32,
      "estado": "VIGENTE",
      "total_cobranzas": 1,
      "total_alertas": 0,
      "cluster": 2,
      "nivel_riesgo": "BAJO",
      "tasa_mora": 0.5
    },
    ...
  ]
}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OPCIÃ“N 2: Probar Frontend (RECOMENDADO)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Abrir navegador:
   http://localhost:5173/

2. Ir a Analytics:
   http://localhost:5173/analytics

3. Verificar que aparezca:
   âœ“ 4 tarjetas de riesgo (BAJO, MEDIO, ALTO, CRÃTICO)
   âœ“ Tabla con columnas: PÃ³liza | Cliente | Monto | ... | Riesgo
   âœ“ Filtro por riesgo (dropdown)
   âœ“ Datos de las 1,403 pÃ³lizas

4. Interactuar:
   âœ“ Cambiar filtro de "Mostrar Todos" a "BAJO"
   âœ“ Tabla debe mostrar solo pÃ³lizas BAJO
   âœ“ Cambiar a "CRÃTICO"
   âœ“ Tabla debe mostrar solo pÃ³lizas CRÃTICO

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š TABS DISPONIBLES EN ANALYTICS

TAB 1: "ğŸ“Š PÃ³lizas & Riesgo" (PASOS 4-6)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ 4 tarjetas con resumen por riesgo
âœ“ Tabla completa de 1,403 pÃ³lizas
âœ“ Filtro dinÃ¡mico por nivel de riesgo
âœ“ Colores cÃ³digo: Verde (BAJO), Naranja (MEDIO), Rojo (ALTO), Morado (CRÃTICO)

TAB 2: "ğŸ“ˆ EstadÃ­sticas"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ Resumen de totales
âœ“ GrÃ¡fico Pie de distribuciÃ³n
âœ“ Tabla de estadÃ­sticas por cluster

TAB 3: "ğŸ§¹ Calidad"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ Medidor de datos limpios
âœ“ Grid de issues encontrados

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” VERIFICACIÃ“N DE FUNCIONALIDAD

PASO 4 - REST Endpoint:
âœ“ GET /api/analytics/clusters/ devuelve 1,403 pÃ³lizas
âœ“ Estructura JSON correcta
âœ“ Campos: numero_poliza, cluster, nivel_riesgo, tasa_mora, etc.

PASO 5 - Tabla Frontend:
âœ“ Tabla con 1,403 filas
âœ“ 8 columnas visibles
âœ“ Datos coinciden con backend
âœ“ Filtros funcionan

PASO 6 - Mapeo de Riesgo:
âœ“ BAJO: pÃ³lizas sin problemas
âœ“ MEDIO: pÃ³lizas con mora 10%+ o alertas
âœ“ ALTO: pÃ³lizas con mora 30%+ o muchas alertas
âœ“ CRÃTICO: pÃ³lizas con mora 50%+ o alertas > 5

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš™ï¸ CONFIGURACIÃ“N DEL FRONTEND

Si hay problema de conexiÃ³n con el backend:

1. Revisar sigepol/settings.py:
   ```python
   CORS_ALLOWED_ORIGINS = [
       "http://localhost:3000",
       "http://localhost:5173",  # Para Vite
   ]
   ```

2. Revisar frontend/src/services/api.js:
   ```javascript
   const API_BASE_URL = 'http://127.0.0.1:8000';
   ```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ†˜ TROUBLESHOOTING

PROBLEMA: "Cannot GET /api/analytics/clusters/"
SOLUCIÃ“N:
  âœ“ Verificar que analytics estÃ¡ en INSTALLED_APPS
  âœ“ Verificar que urls.py tiene path("api/analytics/", ...)
  âœ“ Reiniciar Django: Ctrl+C y python manage.py runserver

PROBLEMA: "CORS error" en frontend
SOLUCIÃ“N:
  âœ“ Agregar localhost:5173 en CORS_ALLOWED_ORIGINS
  âœ“ Reiniciar Django

PROBLEMA: "Cannot find module" en frontend
SOLUCIÃ“N:
  âœ“ cd frontend
  âœ“ npm install
  âœ“ npm run dev

PROBLEMA: Tabla vacÃ­a
SOLUCIÃ“N:
  âœ“ Verificar en browser console (F12)
  âœ“ Ver Network tab â†’ GET /api/analytics/clusters/
  âœ“ Verificar que hay token JWT

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“± ENDPOINT PRINCIPAL

GET /api/analytics/clusters/

ParÃ¡metros: Ninguno
AutenticaciÃ³n: IsAuthenticated (JWT Token)

Response: 
{
  "total_polizas": 1403,
  "clusters_identificados": 5,
  "data": [...]
}

Campos del data:
  â€¢ numero_poliza: String (ej: "X-P-125623")
  â€¢ cliente_nombre: String
  â€¢ monto_uf: Float
  â€¢ estado: String ("VIGENTE", "VENCIDA", etc.)
  â€¢ total_cobranzas: Integer
  â€¢ total_alertas: Integer
  â€¢ cluster: Integer (0-4)
  â€¢ nivel_riesgo: String ("BAJO", "MEDIO", "ALTO", "CRÃTICO")
  â€¢ tasa_mora: Float (0.0 - 1.0)
  â€¢ distancia_cluster: Float (null si no hay modelo)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… CHECKLIST DE TESTING

BACKEND:
â–¡ Django runserver inicia sin errores
â–¡ GET /api/analytics/clusters/ responde 200 OK
â–¡ Response incluye 1,403 registros
â–¡ Todos los campos estÃ¡n presentes
â–¡ nivel_riesgo tiene valores vÃ¡lidos

FRONTEND:
â–¡ http://localhost:5173 carga
â–¡ PÃ¡gina Analytics abre sin errores
â–¡ 4 tarjetas de riesgo aparecen
â–¡ Tabla se carga con datos
â–¡ Filtro por riesgo funciona
â–¡ Colores son correctos
â–¡ No hay errores en console (F12)

INTEGRACIÃ“N:
â–¡ Datos en tabla coinciden con API
â–¡ Filtros actualizan tabla
â–¡ NÃºmeros suman correctamente
â–¡ Responsive design funciona

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ SIGUIENTES PASOS

1. âœ… Proyecto ejecutÃ¡ndose
2. â³ Probar PASOS 4-6 (ahora)
3. â³ Entrenar modelos ML
4. â³ Activar predicciones automÃ¡ticas
5. â³ Testing end-to-end
6. â³ Deployment (MÃ“DULO 4)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Â¡BUENA SUERTE CON LAS PRUEBAS! ğŸš€
